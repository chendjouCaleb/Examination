<div class="p-3" style="background-color: var(--cardBackgroundColor)">
  <div class="d-flex">
    <div class="mr-5">
      <div class="ms-fontSize-20 ">
        Demande <app-icon *ngIf="application.isAuthor" class="ml-1"></app-icon>
      </div>

      <div>
        <span [appStateBadge]="application.state"></span>
      </div>
    </div>

    <div class="text-right ml-5">
      <ng-container *ngIf="application.examination.userPrincipal?.isPrincipal && application.waiting">
        <MsfButton Icon="CheckMark" theme="success" (click)="accept()">Accepter</MsfButton>
        <MsfButton Icon="UserRemove" theme="error" class="ml-2" (click)="reject()">Rejeter</MsfButton>
      </ng-container>

      <ng-container *ngIf="application.isAuthor && application.waiting">
        <MsfButton  [MsfMenuTrigger]="more" Icon="Edit" LeftIcon="ChevronDown" theme="primary" class="ml-2">Modifier</MsfButton>

        <MsfMenu #more>
          <MsfMenuItem icon="Contact" (click)="_applicationService.edit(application)">Modifier les informations</MsfMenuItem>
            <MsfMenuItem icon="D365TalentLearn" (click)="_applicationService.changeSpeciality(application)"
                         *ngIf="application.speciality">Changer la spécialité
            </MsfMenuItem>
            <MsfMenuItem icon="D365TalentLearn" (click)="_applicationService.changeSpeciality(application)"
                         *ngIf="!application.speciality">Assigner une spécialité
            </MsfMenuItem>
            <MsfMenuItem icon="Cancel" theme="error" (click)="_applicationService.removeSpeciality(application)"
                         *ngIf="application.speciality">Enlever la spécialité
            </MsfMenuItem>
        </MsfMenu>
      </ng-container>

      <MsfButton *ngIf="application.isAuthor" Icon="Delete" [outline]="true" (click)="delete()" theme="error" class="ml-2">Supprimer</MsfButton>



      <MsfIconButton icon="Cancel" class="ml-2" MsfModalClose>Fermer</MsfIconButton>
    </div>
    <hr>
  </div>

  <div class="mt-4">
    <MsfPersona *ngIf="application.user">
      <MsfPersonaFigure text="{{application.user.fullName}}"></MsfPersonaFigure>
      <MsfPersonaText>
        <div class="ms-fontSize-12">Envoyée par</div>
        <div class="ms-fontWeight-semibold">{{application.user.fullName}}</div>
        <div class="ms-fontSize-12"> {{application.registrationDate | amCalendar}}</div>
      </MsfPersonaText>
    </MsfPersona>

    <MsfPersona *ngIf="application.processUser" class="ml-5">
      <MsfPersonaFigure text="{{application.processUser.fullName}}"></MsfPersonaFigure>
      <MsfPersonaText>
        <div class="ms-fontSize-12">Traitée par</div>
        <div class="ms-fontWeight-semibold">{{application.processUser.fullName}}</div>
        <div class="ms-fontSize-12"> {{application.processDate | amCalendar}}</div>
      </MsfPersonaText>
    </MsfPersona>
  </div>

  <div class="mt-4">
    <div>Nom & prénom</div>
    <div class="ms-fontSize-18">{{application.fullName}}</div>
  </div>

  <div class="mt-4">
    <div>Matricule</div>
    <div class="ms-fontSize-18">{{application.registrationId}}</div>
  </div>

  <div class="mt-3">
    <div>Date de naissance</div>
    <div class="ms-fontSize-18">{{application.birthDate | amCalendar}}</div>
  </div>

  <div class="mt-3">
    <div>Genre</div>
    <div class="ms-fontSize-18">
      <ng-container *ngIf="application.gender == 'M' || application.gender == 'm'">Masculin</ng-container>
      <ng-container *ngIf="application.gender == 'F' || application.gender == 'f'">Féminin</ng-container>
    </div>
  </div>

  <div class="divider"></div>

  <div class="mt-3">
    <div>Spécialité</div>
    <div class="ms-fontSize-18">{{application.speciality.name}}</div>
    <div class="ms-fontSize-18 ms-fontColor-sharedOrange10" *ngIf="!application.speciality">Aucune</div>

  </div>

  <div class="mt-3">

  </div>

</div>
