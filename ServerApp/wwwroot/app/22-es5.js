function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Seuy:function(e,t,n){"use strict";n.r(t);var r,c=n("tyNb"),i=n("mQu2"),o=n("ofXK"),a=n("mrSG"),s=n("fXoL"),l=n("DVlV"),b=n("C0vA"),u=n("jhN1"),d=n("mV8I"),m=n("hP6x"),p=n("+m0u"),h=n("H0s3"),f=((r=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=s.Jb({type:r,selectors:[["app-school-card"]],hostAttrs:[1,"d-block"],inputs:{school:"school"},decls:12,vars:8,consts:[["alt","Logo image","height","320","width","320",3,"src"],[2,"padding","12px"],[1,"ms-fontSize-18",2,"line-height","24px"],[1,"ms-fontSize-12"],[1,"ms-divider","my-2"],["msButton","","icon","RedEye","theme","primary",3,"routerLink"]],template:function(e,t){1&e&&(s.Qb(0,"img",0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Ac(3),s.gc(4,"uppercase"),s.Ub(),s.Vb(5,"div"),s.Ac(6),s.Ub(),s.Vb(7,"div",3),s.Ac(8),s.Ub(),s.Qb(9,"div",4),s.Vb(10,"button",5),s.Ac(11,"VOIR"),s.Ub(),s.Ub()),2&e&&(s.lc("src",t.school.imageUrl,s.tc),s.Bb(3),s.Dc("",t.school.name," (",s.hc(4,6,t.school.acronym),")"),s.Bb(3),s.Bc(t.school.address),s.Bb(2),s.Cc("@",t.school.identifier,""),s.Bb(2),s.lc("routerLink",t.school.url))},directives:[p.b,c.c],pipes:[o.G],encapsulation:2}),r);function v(e,t){if(1&e){var n=s.Wb();s.Vb(0,"button",9),s.dc("click",(function(){return s.rc(n),s.fc(2).add()})),s.Ac(1,"Ajouter un \xe9tablissement"),s.Ub()}}function y(e,t){1&e&&(s.Vb(0,"msAlert",10),s.Vb(1,"div"),s.Ac(2," Vous \xeates chef d'un \xe9tablissement? Ajouter votre \xe9tablissement sur notre plateforme d\xe8s maintenant. "),s.Ub(),s.Vb(3,"div",11),s.Vb(4,"button",12),s.Ac(5,"Ajouter un \xe9tablissement"),s.Ub(),s.Ub(),s.Ub())}function g(e,t){1&e&&s.Qb(0,"app-school-card",13),2&e&&s.lc("school",t.$implicit)}function U(e,t){if(1&e&&(s.Vb(0,"div",1),s.Vb(1,"div",2),s.Vb(2,"h2"),s.Ac(3),s.Ub(),s.Vb(4,"div",3),s.yc(5,v,2,0,"button",4),s.Ub(),s.Ub(),s.yc(6,y,6,0,"msAlert",5),s.Vb(7,"div",6),s.Vb(8,"ms-grid",7),s.yc(9,g,1,1,"app-school-card",8),s.Ub(),s.Ub(),s.Ub()),2&e){var n=s.fc();s.Bb(3),s.Cc(" \xc9tablissements (",n.schools.length,") "),s.Bb(2),s.lc("ngIf",n._auth.isAuthorized),s.Bb(1),s.lc("ngIf",n._auth.isAuthorized),s.Bb(2),s.lc("itemWidth",320)("itemHeight",480),s.Bb(1),s.lc("msGridItemDefOf",n.schools)}}var A,V,B=((A=function(){function e(t,n,r,c,i,o){_classCallCheck(this,e),this._httpClient=t,this._schoolService=n,this._schoolLoader=r,this._auth=c,this.title=i,this.router=o,this.title.setTitle("\xc9tablissements")}return _createClass(e,[{key:"pan",value:function(){console.log("paann")}},{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._httpClient.list();case 2:return t=e.sent,e.next=5,this._schoolLoader.loadAll(t);case 5:this.schools=t.toArray();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"add",value:function(){var e=this;this._schoolService.add().then((function(t){t&&e.router.navigateByUrl("/schools/".concat(t.id))}))}}]),e}()).\u0275fac=function(e){return new(e||A)(s.Pb(l.T),s.Pb(i.c),s.Pb(l.V),s.Pb(b.a),s.Pb(u.e),s.Pb(c.b))},A.\u0275cmp=s.Jb({type:A,selectors:[["ng-component"]],decls:2,vars:1,consts:[["class","p-3",4,"ngIf"],[1,"p-3"],[1,"ms-pageTitle"],[1,"ms-hiddenSm"],["msButton","","icon","Add","theme","primary",3,"click",4,"ngIf"],["theme","standard","class","d-block my-2 ms-hiddenMdUp",4,"ngIf"],[1,"py-3"],["yGap","0",3,"itemWidth","itemHeight"],["style","background-color: var(--cardBackgroundColor)",3,"school",4,"msGridItemDef","msGridItemDefOf"],["msButton","","icon","Add","theme","primary",3,"click"],["theme","standard",1,"d-block","my-2","ms-hiddenMdUp"],[1,"mt-2"],["msButton","","icon","Add","theme","primary","routerLink","/schools/add"],[2,"background-color","var(--cardBackgroundColor)",3,"school"]],template:function(e,t){1&e&&(s.Vb(0,"app-layout"),s.yc(1,U,10,6,"div",0),s.Ub()),2&e&&(s.Bb(1),s.lc("ngIf",t.schools))},directives:[d.a,o.t,m.a,m.b,p.b,h.a,c.c,f],encapsulation:2}),A),k=n("EEi/"),_=n("axUC"),C=n("W7Jm"),P=n("MHz2"),I=n("SWPu"),w=n("trNy"),S=n("coJQ"),x=n("Gzle"),L=n("judq"),D=n("pY1q"),j=((V=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||V)},V.\u0275cmp=s.Jb({type:V,selectors:[["app-department-card"]],inputs:{department:"department"},decls:12,vars:7,consts:[["alt","Logo image","height","320","width","320",3,"src"],[2,"padding","12px"],[1,"ms-fontSize-18",2,"line-height","24px"],[1,"ms-divider","my-2"],[3,"routerLink"],["msButton","","icon","RedEye","theme","primary"]],template:function(e,t){1&e&&(s.Vb(0,"div"),s.Qb(1,"img",0),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Ac(4),s.gc(5,"uppercase"),s.Ub(),s.Vb(6,"div"),s.Ac(7),s.Ub(),s.Qb(8,"div",3),s.Vb(9,"a",4),s.Vb(10,"button",5),s.Ac(11,"VOIR"),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(1),s.lc("src",t.department.imageUrl,s.tc),s.Bb(3),s.Dc("",t.department.name," (",s.hc(5,5,t.department.acronym),")"),s.Bb(3),s.Bc(t.department.address),s.Bb(2),s.lc("routerLink",t.department.url))},directives:[c.d,p.b],pipes:[o.G],encapsulation:2}),V);function T(e,t){if(1&e){var n=s.Wb();s.Vb(0,"div"),s.Vb(1,"button",5),s.dc("click",(function(){return s.rc(n),s.fc(2).add()})),s.Ac(2,"Ajouter un d\xe9partement"),s.Ub(),s.Vb(3,"button",6),s.dc("click",(function(){return s.rc(n),s.fc(2).add()})),s.Ac(4,"Ajouter"),s.Ub(),s.Ub()}}function z(e,t){1&e&&s.Qb(0,"app-department-card",7),2&e&&s.lc("department",t.$implicit)}function H(e,t){if(1&e&&(s.Tb(0),s.Vb(1,"div",1),s.Vb(2,"div",2),s.Ac(3),s.Ub(),s.yc(4,T,5,0,"div",0),s.Ub(),s.Vb(5,"ms-grid",3),s.yc(6,z,1,1,"app-department-card",4),s.Ub(),s.Sb()),2&e){var n=s.fc();s.Bb(3),s.Cc(" D\xe9partements (",n.school.departments.size(),")"),s.Bb(1),s.lc("ngIf",n._auth.isAuthorized&&n.school.userPrincipal.isPrincipal),s.Bb(1),s.lc("itemWidth",320)("itemHeight",480),s.Bb(1),s.lc("msGridItemDefOf",n.school.departments.toArray())}}var O,Q=((O=function(){function e(t,n,r,c,i,o){_classCallCheck(this,e),this.currentItems=t,this._httpClient=n,this._departmentService=r,this._departmentLoader=c,this._auth=i,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.AssertHelpers.isNotNull(this.school),e.next=3,this._httpClient.list({schoolId:this.school.id});case 3:return t=e.sent,e.next=6,this._departmentLoader.loadAll(t);case 6:this.school.departments=t;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"add",value:function(){var e=this;this._departmentService.add(this.school).then((function(t){t&&e.router.navigateByUrl(t.url)}))}}]),e}()).\u0275fac=function(e){return new(e||O)(s.Pb(I.a),s.Pb(C.k),s.Pb(L.a),s.Pb(_.h),s.Pb(b.a),s.Pb(c.b))},O.\u0275cmp=s.Jb({type:O,selectors:[["app-department-list"]],inputs:{school:"school"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"ms-pageTitle"],["msFontSize","20"],["yGap","0",1,"mt-3",3,"itemWidth","itemHeight"],["style","background-color: var(--cardBackgroundColor); display: inline-block",3,"department",4,"msGridItemDef","msGridItemDefOf"],["msButton","","icon","Add","theme","primary",1,"ms-hiddenSm",3,"click"],["msButton","","icon","Add","theme","primary",1,"ms-hiddenMdUp",3,"click"],[2,"background-color","var(--cardBackgroundColor)","display","inline-block",3,"department"]],template:function(e,t){1&e&&s.yc(0,H,7,5,"ng-container",0),2&e&&s.lc("ngIf",t.school.departments)},directives:[o.t,D.a,m.a,m.b,p.b,j],encapsulation:2}),O),G=n("ahM8"),R=n("Lfng"),W=n("OG9P");function J(e,t){if(1&e){var n=s.Wb();s.Vb(0,"button",7),s.dc("click",(function(){return s.rc(n),s.fc().addPlanners()})),s.Ac(1," Ajouter "),s.Vb(2,"span",8),s.Ac(3," des planificateurs"),s.Ub(),s.Ub()}}function N(e,t){1&e&&(s.Vb(0,"msAlert",9),s.Ac(1," Les planificateurs sont les personnes charg\xe9es de "),s.Vb(2,"b"),s.Ac(3," dresser les emplois du temps des cours et des examens!"),s.Ub(),s.Qb(4,"br"),s.Ac(5," Ce sont aussi eux qui "),s.Vb(6,"b"),s.Ac(7,"ajouteront ou supprimeront les personnes qui surveillent, corrigent, et traitent les \xe9preuves"),s.Ub(),s.Ac(8,".\n"),s.Ub())}function E(e,t){1&e&&(s.Vb(0,"ms-tableHead"),s.Vb(1,"ms-tableHeadCell",10),s.Ac(2,"#"),s.Ub(),s.Vb(3,"ms-tableHeadCell",11),s.Ac(4,"Utilisateur"),s.Ub(),s.Vb(5,"ms-tableHeadCell",12),s.Ac(6,"Date d'ajout"),s.Ub(),s.Vb(7,"msTableHeadCell",13),s.Qb(8,"i",14),s.Ub(),s.Ub())}function M(e,t){if(1&e&&s.Qb(0,"ms-persona",26),2&e){var n=s.fc().$implicit;s.lc("imageUrl",n.user.imageUrl)}}function $(e,t){if(1&e&&s.Qb(0,"ms-persona",27),2&e){var n=s.fc().$implicit;s.lc("text",n.user.name)}}function q(e,t){if(1&e&&(s.Vb(0,"div",24),s.Ac(1),s.Ub()),2&e){var n=s.fc().$implicit;s.Bb(1),s.Cc("@",null==n.user?null:n.user.username,"")}}function F(e,t){if(1&e){var n=s.Wb();s.Tb(0),s.Vb(1,"button",28),s.dc("click",(function(){s.rc(n);var e=s.fc().$implicit;return s.fc().deletePlanner(e)})),s.Ub(),s.Sb()}2&e&&(s.Bb(1),s.lc("rounded",!0))}function K(e,t){if(1&e&&(s.Vb(0,"tr",15,16),s.Vb(2,"td",17),s.Ac(3),s.Ub(),s.Vb(4,"td",17),s.Vb(5,"div",18),s.yc(6,M,1,1,"ms-persona",19),s.yc(7,$,1,1,"ms-persona",20),s.Vb(8,"div",21),s.Vb(9,"div",22),s.Ac(10),s.Ub(),s.yc(11,q,2,1,"div",23),s.Ub(),s.Ub(),s.Ub(),s.Vb(12,"ms-tableCell",24),s.Ac(13),s.gc(14,"date"),s.Ub(),s.Vb(15,"ms-tableCell"),s.yc(16,F,2,1,"ng-container",25),s.Ub(),s.Ub()),2&e){var n=t.$implicit,r=t.index,c=s.fc();s.Bb(3),s.Cc("",r+1," "),s.Bb(3),s.lc("ngIf",n.user.hasImage),s.Bb(1),s.lc("ngIf",!n.user.hasImage),s.Bb(3),s.Bc(null==n.user?null:n.user.fullName),s.Bb(1),s.lc("ngIf",null==n.user?null:n.user.username),s.Bb(2),s.Bc(s.hc(14,7,n.registrationDate)),s.Bb(3),s.lc("ngIf",c.school.userPrincipal.isPrincipal)}}var X,Y=function(){return[]},Z=((X=function(){function e(t,n){_classCallCheck(this,e),this._plannerLoader=t,this._service=n}return _createClass(e,[{key:"ngAfterViewInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.AssertHelpers.isNotNull(this.school),e.next=3,this._plannerLoader.loadBySchool(this.school);case 3:(t=this.table).unshift.apply(t,_toConsumableArray(this.school.planners.toArray()));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"addPlanners",value:function(){var e=this;this._service.addPlanners(this.school).then((function(t){var n;(n=e.table).unshift.apply(n,_toConsumableArray(t.toArray()))}))}},{key:"deletePlanner",value:function(e){var t=this;this._service.deletePlanner(e).then((function(n){n&&t.table.remove(t.table.items.find((function(t){return t.id===e.id})))}))}}]),e}()).\u0275fac=function(e){return new(e||X)(s.Pb(l.L),s.Pb(G.a))},X.\u0275cmp=s.Jb({type:X,selectors:[["app-planner-list"]],viewQuery:function(e,t){var n;1&e&&s.Fc(R.d,!0),2&e&&s.pc(n=s.ec())&&(t.table=n.first)},inputs:{school:"school"},decls:9,vars:4,consts:[[1,"ms-pageTitle"],["msButton","","icon","Add","theme","primary",3,"click",4,"ngIf"],["theme","standard","class","mt-3",4,"ngIf"],[1,"mt-3"],["table",""],[4,"msTableHeadDef"],["ms-tableRow","",4,"ms-tableRowDef","ms-tableRowDefOf"],["msButton","","icon","Add","theme","primary",3,"click"],[1,"ms-hiddenSm"],["theme","standard",1,"mt-3"],["name","#"],["name","user"],["name","registrationDate"],["name","actions",1,"text-right"],[1,"ms-Icon","ms-Icon--SetAction"],["ms-tableRow",""],["row",""],["ms-tableCell",""],[1,"d-flex"],["size","size40",3,"imageUrl",4,"ngIf"],["size","size40",3,"text",4,"ngIf"],[1,"ml-2"],[1,"ms-fontWeight-semibold"],["class","ms-fontSize-12",4,"ngIf"],[1,"ms-fontSize-12"],[4,"ngIf"],["size","size40",3,"imageUrl"],["size","size40",3,"text"],["msIconButton","","icon","Delete","theme","error",3,"rounded","click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"h4"),s.Ac(2,"Planificateurs"),s.Ub(),s.yc(3,J,4,0,"button",1),s.Ub(),s.yc(4,N,9,0,"msAlert",2),s.Vb(5,"ms-table",3,4),s.yc(7,E,9,0,"ms-tableHead",5),s.yc(8,K,17,9,"tr",6),s.Ub()),2&e&&(s.Bb(3),s.lc("ngIf",t.school.userPrincipal.isPrincipal),s.Bb(1),s.lc("ngIf",t.school.userPrincipal.isPrincipal),s.Bb(4),s.lc("ms-tableRowDefOf",s.nc(3,Y)))},directives:[o.t,R.d,R.h,R.k,p.b,h.a,R.f,R.g,R.j,R.e,W.a,p.d],pipes:[o.f],encapsulation:2}),X),ee=n("sytO"),te=n("HeT6"),ne=n("E1cc");function re(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-department-list",7),s.Ub()),2&e){var n=s.fc();s.Bb(1),s.lc("school",n.school)}}function ce(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-planner-list",7),s.Ub()),2&e){var n=s.fc();s.Bb(1),s.lc("school",n.school)}}function ie(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-room-list",7),s.Ub()),2&e){var n=s.fc();s.Bb(1),s.lc("school",n.school)}}function oe(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-application-list",7),s.Ub()),2&e){var n=s.fc();s.Bb(1),s.lc("school",n.school)}}function ae(e,t){if(1&e&&(s.Vb(0,"div"),s.Qb(1,"app-examination-list",7),s.Ub()),2&e){var n=s.fc();s.Bb(1),s.lc("school",n.school)}}var se,le,be=((se=function(){function e(t,n){_classCallCheck(this,e),this._router=t,this.school=n.get("school")}return _createClass(e,[{key:"change",value:function(e){console.log(e)}}]),e}()).\u0275fac=function(e){return new(e||se)(s.Pb(c.b),s.Pb(I.a))},se.\u0275cmp=s.Jb({type:se,selectors:[["app-school-page-layout"]],decls:20,vars:1,consts:[[3,"school","onSchoolDelete"],["id","departments"],["id","planificators"],["id","rooms"],["id","applications"],["id","examens"],[4,"msPivotContentDef"],[3,"school"]],template:function(e,t){1&e&&(s.Vb(0,"app-layout"),s.Vb(1,"app-school-banner",0),s.dc("onSchoolDelete",(function(){return t._router.navigateByUrl("/schools")})),s.Ub(),s.Vb(2,"msPivot"),s.Vb(3,"msPivotHeader"),s.Vb(4,"msPivotLabel",1),s.Ac(5,"D\xe9partments"),s.Ub(),s.Vb(6,"msPivotLabel",2),s.Ac(7,"Planificateurs"),s.Ub(),s.Vb(8,"msPivotLabel",3),s.Ac(9,"Salles"),s.Ub(),s.Vb(10,"msPivotLabel",4),s.Ac(11,"Demandes"),s.Ub(),s.Vb(12,"msPivotLabel",5),s.Ac(13,"Examens"),s.Ub(),s.Ub(),s.Vb(14,"msPivotBody"),s.yc(15,re,2,1,"div",6),s.yc(16,ce,2,1,"div",6),s.yc(17,ie,2,1,"div",6),s.yc(18,oe,2,1,"div",6),s.yc(19,ae,2,1,"div",6),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(1),s.lc("school",t.school))},directives:[d.a,w.a,S.a,S.d,S.e,S.b,S.c,Q,Z,ee.a,te.a,ne.a],encapsulation:2}),se),ue=n("lbq7"),de=n("GKcc"),me=n("UlGT"),pe=((le=function(){function e(t){var n=this;_classCallCheck(this,e),this.router=t,this.cancel=function(){return n.router.navigateByUrl("/schools")}}return _createClass(e,[{key:"oncreated",value:function(e){this.router.navigateByUrl(e.url)}}]),e}()).\u0275fac=function(e){return new(e||le)(s.Pb(c.b))},le.\u0275cmp=s.Jb({type:le,selectors:[["ng-component"]],decls:3,vars:1,consts:[["title","Ajouter une \xe9cole"],[1,"flex-center-cover"],[1,"flex-center",3,"oncancel","oncreated"]],template:function(e,t){1&e&&(s.Vb(0,"app-layout",0),s.Vb(1,"div",1),s.Vb(2,"app-school-add",2),s.dc("oncreated",(function(e){return t.oncreated(e)})),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Bb(2),s.lc("oncancel",t.cancel))},directives:[d.a,me.a],encapsulation:2}),le);n.d(t,"SchoolPageModule",(function(){return ve}));var he,fe=[{path:"",component:B},{path:"add",component:pe,canActivate:[b.c]},{path:":schoolId",resolve:[i.b],component:be}],ve=((he=function e(){_classCallCheck(this,e)}).\u0275mod=s.Nb({type:he}),he.\u0275inj=s.Mb({factory:function(e){return new(e||he)},imports:[[o.c,i.a,ue.g,C.x,ue.a,_.q,ue.t,ue.m,p.c,m.c,S.f,c.e.forChild(fe),k.a,P.d,de.a]]}),he)}}]);